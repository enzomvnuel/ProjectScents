<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Women - Project Scents</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Shop Item Styles */
        .item-img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            margin-bottom: 10px;
            filter: grayscale(0%);
            transition: filter 0.3s ease;
        }
        .item-img:hover {
            filter: grayscale(100%);
        }
        .item-details {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .item-details .item-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .item-details .item-price {
            font-size: 1.1rem;
            color: #007bff;
        }
        
        /* START: Shopping Cart Button Styles */
        .add-to-cart-btn {
            background-color: #000000;
            color: #ffffff;
            border: 1px solid #000000;
            border-radius: 5px;
            padding: 10px 20px;
            font-weight: bold;
            letter-spacing: 0.1rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .add-to-cart-btn:hover {
            background-color: #333333;
            color: #ffffff;
            border-color: #333333;
        }
        
        .view-cart-btn {
            background-color: #f8f9fa; /* Light background to stand out */
            color: #000000;
            border: 1px solid #000000;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        
        .view-cart-btn:hover {
            background-color: #000000;
            color: #ffffff;
        }

        /* Style for the close button in the dark modal header */
        .modal-header.bg-dark .btn-close-white {
            filter: invert(1);
        }
        /* END: Shopping Cart Button Styles */

        /* Responsive adjustments for shop items */
        @media (max-width: 767.98px) {
            .item-img {
                height: 250px;
            }
        }
        @media (max-width: 575.98px) {
            .item-img {
                height: 200px;
            }
        }
    </style>
</head>

<body>

    <div class="container-fluid">
        <div class="row">

            <div class="col-12 col-md-3 col-lg-2 p-0">
                <div class="sidebar d-flex flex-column">
                    <div class="sidebar-header mb-auto">
<img src="https://avatars.githubusercontent.com/u/113776245?s=400&u=f7f681da8d58f45e8fbabf1b9ad5cf973f07ce2d&v=4" alt="Enzo Perfumery Logo" class="sidebar-logo mb-3">
                        <h3 class="fw-bold">Project Scents</h3>
                    </div>
                    <nav class="nav flex-column">
                        <a class="nav-link" href="home.html">Scents</a>
                        <a class="nav-link" href="about.html">About Us</a>
                        <a class="nav-link" href="page1.html">Shop Men</a>
                        <a class="nav-link active" href="page2.html">Shop Women</a>
			<a class="nav-link" href="settings.html">Settings</a>
                        <a class="nav-link" href="#contact">Contact</a>
                    </nav>
                    <div class="mt-auto">
                        <a href="home.html" class="btn btn-outline-light back-btn">‚Üê BACK</a>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-9 col-lg-10">
                
                <div class="container-fluid pt-3 pe-4 d-flex justify-content-end">
                    <button class="btn view-cart-btn" onclick="viewCart()">View Cart üõí</button>
                </div>
                <section id="shop-items" class="main-content container my-5">
                    <h2 class="text-center mb-5">FOR WOMEN</h2>
                    <div class="row g-4">
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-1.html">
                                <img src="https://philregalo.com/cdn/shop/products/n-5-eau-de-parfum-spray-3-4fl-oz--packshot-default-125530-8833876492318.jpg?v=1634805457" class="item-img" alt="Item 1">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Chanel No. 5</h4>
                                <p class="item-price">‚Ç±5,000.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-001" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-2.html">
                                <img src="https://rustans-thebeautysource.com/en/wp-content/uploads/2022/12/1511153.jpg" class="item-img" alt="Item 2">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Christian Dior J'adore</h4>
                                <p class="item-price">‚Ç±9,000.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-002" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-3.html">
                                <img src="https://gordonsdirect.com/cdn/shop/products/black-opium.jpg?v=1623852940" class="item-img" alt="Item 3">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Yves Saint Laurent Black Opium</h4>
                                <p class="item-price">‚Ç±8,000.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-003" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-4.html">
                                <img src="https://www.scentimesmnl.com/cdn/shop/files/P_Valentino_Donna_Born_In_Roma_Intense.jpg?v=1743483219&width=1445" class="item-img" alt="Item 4">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Valentino Donna Born In Roma Intense</h4>
                                <p class="item-price">‚Ç±4,500.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-004" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-5.html">
                                <img src="https://www.houseoffraser.co.uk/images/imgzoom/75/75245969_xxl.jpg" class="item-img" alt="Item 5">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Jean Paul Gaultier: Gaultier Divine Intense</h4>
                                <p class="item-price">‚Ç±7,500.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-005" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 col-sm-6">
                            <a href="women-item-6.html">
                                <img src="https://www.scentimesmnl.com/cdn/shop/files/P_Emporio_Armni-In_Love_With_You_2ef065d6-edb7-4b8a-9937-7b8f04b6b5f8.jpg?v=1743580135&width=1445" class="item-img" alt="Item 6">
                            </a>
                            <div class="item-details">
                                <h4 class="item-title">Emporio Armani In Love With You</h4>
                                <p class="item-price">‚Ç±6,000.00</p>
                                <div class="product-actions">
                                    <button class="btn add-to-cart-btn w-100 mt-3" data-product-id="women-006" onclick="addToCart(this)">
                                        ADD TO CART
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </section>

                <section id="contact" class="main-content container my-5">
                    <h2 class="text-center mb-5">CONTACT PROJECT SCENTS</h2>
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <p class="text-center lead">For inquiries, collaborations, or custom orders, please reach out:</p>
                            <ul class="list-unstyled text-center social-links">
                                <li><strong>Email:</strong> <a href="mailto:projectscents@gmail.com">projectscents@gmail.com</a></li>
                                <li><strong>Instagram:</strong> <a href="https://www.instagram.com/projectscents" target="_blank">@projectscents</a></li>
                                <li><strong>Phone:</strong> +63 977 491 0529</li>
                            </ul>
                            <p class="text-center mt-4">You can also fill out the form below:</p>
                            <form>
                                <div class="mb-3">
                                    <label for="name" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email address</label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="message" class="form-label">Message</label>
                                    <textarea class="form-control" id="message" rows="5" required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Send Message</button>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title" id="cartModalLabel">Shopping Cart üõí</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="cartItemsContainer" class="list-group">
                        <p class="text-center text-muted">Your cart is currently empty.</p>
                    </div>
                    <div id="cartTotal" class="mt-4 text-end fw-bold fs-5">
                        Total: ‚Ç±0.00
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
                    <button type="button" class="btn btn-dark" id="proceedToCheckoutBtn">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1050;">
        <div id="cartToast" class="toast align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="2000">
            <div class="d-flex">
                <div class="toast-body">
                    <span id="toastMessage">Item added to cart!</span>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Utility function to get product image source based on product ID
        function getProductImage(productId) {
            // Map product IDs to their corresponding image URLs (includes both Men's and Women's products for cross-page compatibility)
            const imageMap = {
                // Women's Products (from page2.html)
                'women-001': 'https://philregalo.com/cdn/shop/products/n-5-eau-de-parfum-spray-3-4fl-oz--packshot-default-125530-8833876492318.jpg?v=1634805457',
                'women-002': 'https://rustans-thebeautysource.com/en/wp-content/uploads/2022/12/1511153.jpg',
                'women-003': 'https://gordonsdirect.com/cdn/shop/products/black-opium.jpg?v=1623852940',
                'women-004': 'https://www.scentimesmnl.com/cdn/shop/files/P_Valentino_Donna_Born_In_Roma_Intense.jpg?v=1743483219&width=1445',
                'women-005': 'https://www.houseoffraser.co.uk/images/imgzoom/75/75245969_xxl.jpg',
                'women-006': 'https://www.scentimesmnl.com/cdn/shop/files/P_Emporio_Armni-In_Love_With_You_2ef065d6-edb7-4b8a-9937-7b8f04b6b5f8.jpg?v=1743580135&width=1445',
                
                // Men's Products (from page1.html)
                'men-001': 'https://www.perfumestudiomnl.com/cdn/shop/products/image_c2a2b7d1-6bb1-4186-8905-4ba833ead6e6.jpg?v=1617461811', // Bleu De Chanel
                'men-002': 'https://rustans-thebeautysource.com/en/wp-content/uploads/2022/12/2272645.jpg', // Dior Sauvage
                'men-003': 'https://rustans-thebeautysource.com/en/wp-content/uploads/2024/09/3254397.jpg', // YSL Y EDP
                'men-004': 'https://ifragranceofficial.com/wp-content/uploads/2023/01/rTJRtm1073334-0-global.jpeg', // Valentino Uomo
                'men-005': 'https://the-fragrance-shop.imgix.net/products/62902--new--.jpg?fm=webp', // JPG Le Male
                'men-006': 'https://gordonsdirect.com/cdn/shop/files/3614274219548-5.gif?v=1738921159', // Armani Stronger With You
            };
            return imageMap[productId] || 'placeholder.jpg'; // Use a placeholder if ID is missing
        }

        // Function to extract numeric price from string (e.g., "‚Ç±10,000.00" -> 10000)
        function parsePrice(priceString) {
            return parseFloat(priceString.replace('‚Ç±', '').replace(/,/g, '')) || 0;
        }
        
        // Helper function to show a Bootstrap toast notification
        function showToast(message) {
            const toastEl = document.getElementById('cartToast');
            const toastMessageEl = document.getElementById('toastMessage');
            toastMessageEl.textContent = message;
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
        }

        // Add to Cart Logic (handles both initial add from grid and increment from modal)
        function addToCart(buttonElement, productIdToIncrement = null) {
            let productId;
            let productName;
            let productPrice;
            let isIncrementFromModal = false;
            
            if (buttonElement && !productIdToIncrement) {
                // Scenario 1: Called from product list page (ADD TO CART button)
                productId = buttonElement.getAttribute('data-product-id');
                // Use closest to find the container div that holds the title and price
                const itemContainer = buttonElement.closest('.col-md-4, .col-sm-6');
                productName = itemContainer.querySelector('.item-title').textContent.trim();
                productPrice = itemContainer.querySelector('.item-price').textContent.trim();
            } else if (productIdToIncrement) {
                // Scenario 2: Called from cart modal (+) button
                productId = productIdToIncrement;
                isIncrementFromModal = true;
                // Get product details from the existing cart item to update it
                let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                const item = cart.find(i => i.id === productId);
                if (!item) return; 
                productName = item.name;
                productPrice = item.price;
            } else {
                return;
            }
            
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const existingItemIndex = cart.findIndex(item => item.id === productId);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += 1;
                if (!isIncrementFromModal) {
                    showToast(`${productName} added to cart!`);
                }
            } else {
                cart.push({ 
                    id: productId, 
                    name: productName,
                    price: productPrice,
                    quantity: 1 
                });
                showToast(`${productName} added to cart!`);
            }

            localStorage.setItem('shoppingCart', JSON.stringify(cart));
            
            // If called from the modal, re-render the cart display
            if (isIncrementFromModal) {
                viewCart(false);
            }
        }
        
        // Decrease Quantity Logic (handles the '-' button)
        function decreaseQuantity(productId) {
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const existingItemIndex = cart.findIndex(item => item.id === productId);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity -= 1;
                
                if (cart[existingItemIndex].quantity <= 0) {
                    // Remove item completely if quantity is zero or less
                    cart.splice(existingItemIndex, 1);
                }
                
                localStorage.setItem('shoppingCart', JSON.stringify(cart));
                viewCart(false); // Re-render cart in modal (already open)
            }
        }

        // Remove Item Logic (handles the 'X' button)
        function removeItem(productId) {
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            
            // Filter out the item with the matching productId
            cart = cart.filter(item => item.id !== productId);
            
            localStorage.setItem('shoppingCart', JSON.stringify(cart));
            viewCart(false); // Re-render cart in modal (already open)
        }


        // View Cart Logic (uses Modal)
        function viewCart(showModal = true) {
            const cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const container = document.getElementById('cartItemsContainer');
            const totalElement = document.getElementById('cartTotal');
            let grandTotal = 0;
            let cartHTML = '';

            if (cart.length === 0) {
                cartHTML = '<p class="text-center text-muted">Your cart is currently empty.</p>';
            } else {
                cart.forEach(item => {
                    const itemPriceNumeric = parsePrice(item.price);
                    const itemTotal = itemPriceNumeric * item.quantity;
                    grandTotal += itemTotal;

                    // UPDATED: Added quantity controls and remove button
                    cartHTML += `
                        <div class="d-flex align-items-center mb-3 p-2 border-bottom">
                            <img src="${getProductImage(item.id)}" alt="${item.name}" style="width: 70px; height: 70px; object-fit: cover; margin-right: 15px; border-radius: 5px;">
                            <div class="flex-grow-1">
                                <h6 class="mb-0 fw-bold">${item.name}</h6>
                                <small class="text-muted">${item.price}</small>
                            </div>
                            <div class="quantity-controls d-flex align-items-center me-3">
                                <button class="btn btn-sm btn-outline-secondary" onclick="decreaseQuantity('${item.id}')" aria-label="Decrease quantity" style="width: 30px;">-</button>
                                <span class="fw-bold mx-2">${item.quantity}</span>
                                <button class="btn btn-sm btn-outline-secondary" onclick="addToCart(null, '${item.id}')" aria-label="Increase quantity" style="width: 30px;">+</button>
                            </div>
                            <div class="text-end" style="min-width: 100px;">
                                <span class="d-block fw-bold">‚Ç±${itemTotal.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                            </div>
                            <button class="btn btn-sm btn-outline-danger ms-3" onclick="removeItem('${item.id}')" aria-label="Remove item">X</button>
                        </div>
                    `;
                });
            }

            container.innerHTML = cartHTML;
            totalElement.textContent = `Total: ‚Ç±${grandTotal.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

            if (showModal) {
                // Open the modal using Bootstrap's JavaScript API
                const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
                cartModal.show();
            }
        }
        
        // Logic to handle checkout button redirection
        document.addEventListener('DOMContentLoaded', function() {
            const proceedBtn = document.getElementById('proceedToCheckoutBtn');
            if (proceedBtn) {
                proceedBtn.addEventListener('click', function() {
                    window.location.href = 'checkout.html';
                });
            }
        });
    </script>
    </body>

</html>
